'use strict';Registry.require(["helper","promise"],()=>{const l=Registry.get("helper"),h=Registry.get("promise"),k={items:{},remove:function(f){delete k.items[f]},create:function(f){let b={};const e={retimeout_on_get:!1,timeout:300,check_interval:120};let g;const d={init:function(){g||d.schedule()},schedule:function(){d.unschedule();g=window.setInterval(d.clean,1E3*e.check_interval)},unschedule:function(){g&&window.clearInterval(g);g=null},setOptions:function(a){for(const c in a)a.hasOwnProperty(c)&&
(e[c]=a[c],"check_interval"==c&&g&&d.schedule());return d},set:function(a,c){b[a]={value:c,ts:Date.now()}},setj:function(a,c){return d.set(a,c?JSON.stringify(c):c)},get:function(a,c){b[a]&&(e.retimeout_on_get&&(b[a].ts=Date.now()),c=b[a].value);return c},getj:function(){const a=d.get.apply(this,arguments);return a?JSON.parse(a):a},remove:function(a){delete b[a]},clean:function(){const a=Date.now()-1E3*e.timeout;l.each(b,(c,m)=>{c.ts<a&&window.setTimeout(()=>{d.remove(m)},1)})},removeAll:function(){b=
{}},finalize:function(){d.unschedule();b={}}};return k.items[f]=d}};Registry.register("tools","e1582c36",{cache:k,createQueue:f=>{const b=[],e=[],g=()=>{let d;if(e.length<f&&b.length&&(d=b.shift())){const a=d.fn();e.push(a);a.always(()=>{let c;-1<(c=e.indexOf(a))&&e.splice(c,1);g()});d.p.consume(a)}};return{add:function(d){const a=h();b.push({fn:d,p:a});g();return a.promise()}}},sleep:f=>{const b=h();window.setTimeout(()=>{b.resolve()},f);return b.promise()},readAsText:f=>{const b=h(),e=
new FileReader;e.onloadend=function(){b.resolve(this.result)};e.onerror=b.reject;e.onabort=b.reject;e.readAsText(f);return b.promise()}})});
