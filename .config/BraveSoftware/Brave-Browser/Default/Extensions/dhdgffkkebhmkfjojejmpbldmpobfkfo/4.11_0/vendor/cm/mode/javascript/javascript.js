'use strict';(function(u){"object"==typeof exports&&"object"==typeof module?u(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],u):u(CodeMirror)})(function(u){u.defineMode("javascript",function(Ea,y){function r(a,b,d){O=a;T=d;return b}function C(a,b){var d=a.next();if('"'==d||"'"==d)return b.tokenize=Fa(d),b.tokenize(a,b);if("."==d&&a.match(/^\d+(?:[eE][+\-]?\d+)?/))return r("number","number");if("."==d&&a.match(".."))return r("spread","meta");
if(/[\[\]{}\(\),;:\.]/.test(d))return r(d);if("="==d&&a.eat(">"))return r("=>","operator");if("0"==d&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),r("number","number");if("0"==d&&a.eat(/o/i))return a.eatWhile(/[0-7]/i),r("number","number");if("0"==d&&a.eat(/b/i))return a.eatWhile(/[01]/i),r("number","number");if(/\d/.test(d))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),r("number","number");if("/"==d){if(a.eat("*"))return b.tokenize=U,U(a,b);if(a.eat("/"))return a.skipToEnd(),r("comment","comment");
if(na(a,b,1)){a:for(var e=b=!1;null!=(d=a.next());){if(!b){if("/"==d&&!e)break a;"["==d?e=!0:e&&"]"==d&&(e=!1)}b=!b&&"\\"==d}a.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);return r("regexp","string-2")}a.eat("=");return r("operator","operator",a.current())}if("`"==d)return b.tokenize=da,da(a,b);if("#"==d)return a.skipToEnd(),r("error","error");if(oa.test(d))return">"==d&&b.lexical&&">"==b.lexical.type||(a.eat("=")?"!"!=d&&"="!=d||a.eat("="):/[<>*+\-]/.test(d)&&(a.eat(d),">"==d&&a.eat(d))),r("operator",
"operator",a.current());if(ea.test(d)){a.eatWhile(ea);d=a.current();if("."!=b.lastType){if(pa.propertyIsEnumerable(d))return a=pa[d],r(a.type,a.style,d);if("async"==d&&a.match(/^(\s|\/\*.*?\*\/)*[\(\w]/,!1))return r("async","keyword",d)}return r("variable","variable",d)}}function Fa(a){return function(b,d){var e=!1,g;if(V&&"@"==b.peek()&&b.match(Ga))return d.tokenize=C,r("jsonld-keyword","meta");for(;null!=(g=b.next())&&(g!=a||e);)e=!e&&"\\"==g;e||(d.tokenize=C);return r("string","string")}}function U(a,
b){for(var d=!1,e;e=a.next();){if("/"==e&&d){b.tokenize=C;break}d="*"==e}return r("comment","comment")}function da(a,b){for(var d=!1,e;null!=(e=a.next());){if(!d&&("`"==e||"$"==e&&a.eat("{"))){b.tokenize=C;break}d=!d&&"\\"==e}return r("quasi","string-2",a.current())}function fa(a,b){b.fatArrowAt&&(b.fatArrowAt=null);var d=a.string.indexOf("=>",a.start);if(!(0>d)){if(q){var e=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(a.string.slice(a.start,d));e&&(d=e.index)}e=0;var g=!1;for(--d;0<=d;--d){var l=
a.string.charAt(d),v="([{}])".indexOf(l);if(0<=v&&3>v){if(!e){++d;break}if(0==--e){"("==l&&(g=!0);break}}else if(3<=v&&6>v)++e;else if(ea.test(l))g=!0;else{if(/["'\/]/.test(l))return;if(g&&!e){++d;break}}}g&&!e&&(b.fatArrowAt=d)}}function qa(a,b,d,e,g,l){this.indented=a;this.column=b;this.type=d;this.prev=g;this.info=l;null!=e&&(this.align=e)}function m(){for(var a=arguments.length-1;0<=a;a--)f.cc.push(arguments[a])}function c(){m.apply(null,arguments);return!0}function I(a,b){function d(g){for(;g;g=
g.next)if(g.name==a)return!0;return!1}var e=f.state;f.marked="function"==b?"deffunc":"argument"==b?"defarg":"def";e.context?d(e.localVars)||(e.localVars={name:a,next:e.localVars}):!d(e.globalVars)&&y.globalVars&&(e.globalVars={name:a,next:e.globalVars})}function W(a){return"public"==a||"private"==a||"protected"==a||"abstract"==a||"readonly"==a}function P(){f.state.context={prev:f.state.context,vars:f.state.localVars};f.state.localVars=Ha}function Q(){f.state.localVars=f.state.context.vars;f.state.context=
f.state.context.prev}function k(a,b){var d=function(){var e=f.state,g=e.indented;if("stat"==e.lexical.type)g=e.lexical.indented;else for(var l=e.lexical;l&&")"==l.type&&l.align;l=l.prev)g=l.indented;e.lexical=new qa(g,f.stream.column(),a,null,e.lexical,b)};d.lex=!0;return d}function h(){var a=f.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function n(a){function b(d){return d==a?c():";"==a?m():c(b)}return b}function w(a,b){return"var"==a?c(k("vardef",
b.length),ha,n(";"),h):"keyword a"==a?c(k("form"),ia,w,h):"keyword b"==a?c(k("form"),w,h):"keyword d"==a?f.stream.match(/^\s*$/,!1)?c():c(k("stat"),ja,n(";"),h):"debugger"==a?c(n(";")):"{"==a?c(k("}"),R,h):";"==a?c():"if"==a?("else"==f.state.lexical.info&&f.state.cc[f.state.cc.length-1]==h&&f.state.cc.pop()(),c(k("form"),ia,w,h,ra)):"function"==a?c(B):"for"==a?c(k("form"),sa,w,h):"class"==a||q&&"interface"==b?(f.marked="keyword",c(k("form"),ta,h)):"variable"==a?q&&"declare"==b?(f.marked="keyword",
c(w)):q&&("module"==b||"enum"==b||"type"==b)&&f.stream.match(/^\s*\w/,!1)?(f.marked="keyword","enum"==b?c(ua):"type"==b?c(t,n("operator"),t,n(";")):c(k("form"),A,n("{"),k("}"),R,h,h)):q&&"namespace"==b?(f.marked="keyword",c(k("form"),p,R,h)):c(k("stat"),Ia):"switch"==a?c(k("form"),ia,n("{"),k("}","switch"),R,h,h):"case"==a?c(p,n(":")):"default"==a?c(n(":")):"catch"==a?c(k("form"),P,n("("),J,n(")"),w,h,Q):"export"==a?c(k("stat"),Ja,h):"import"==a?c(k("stat"),Ka,h):"async"==a?c(w):"@"==b?c(p,w):m(k("stat"),
p,n(";"),h)}function p(a,b){return va(a,b,!1)}function z(a,b){return va(a,b,!0)}function ia(a){return"("!=a?m():c(k(")"),p,n(")"),h)}function va(a,b,d){if(f.state.fatArrowAt==f.stream.start){var e=d?wa:xa;if("("==a)return c(P,k(")"),x(J,")"),h,n("=>"),e,Q);if("variable"==a)return m(P,A,n("=>"),e,Q)}e=d?K:D;return La.hasOwnProperty(a)?c(e):"function"==a?c(B,e):"class"==a||q&&"interface"==b?(f.marked="keyword",c(k("form"),Ma,h)):"keyword c"==a||"async"==a?c(d?z:p):"("==a?c(k(")"),ja,n(")"),h,e):"operator"==
a||"spread"==a?c(d?z:p):"["==a?c(k("]"),Na,h,e):"{"==a?S(X,"}",null,e):"quasi"==a?m(Y,e):"new"==a?c(Oa(d)):"import"==a?c(p):c()}function ja(a){return a.match(/[;\}\)\],]/)?m():m(p)}function D(a,b){return","==a?c(p):K(a,b,!1)}function K(a,b,d){var e=0==d?D:K,g=0==d?p:z;if("=>"==a)return c(P,d?wa:xa,Q);if("operator"==a)return/\+\+|--/.test(b)||q&&"!"==b?c(e):q&&"<"==b&&f.stream.match(/^([^>]|<.*?>)*>\s*\(/,!1)?c(k(">"),x(t,">"),h,e):"?"==b?c(p,n(":"),g):c(g);if("quasi"==a)return m(Y,e);if(";"!=a){if("("==
a)return S(z,")","call",e);if("."==a)return c(Pa,e);if("["==a)return c(k("]"),ja,n("]"),h,e);if(q&&"as"==b)return f.marked="keyword",c(t,e);if("regexp"==a)return f.state.lastType=f.marked="operator",f.stream.backUp(f.stream.pos-f.stream.start-1),c(g)}}function Y(a,b){return"quasi"!=a?m():"${"!=b.slice(b.length-2)?c(Y):c(p,Qa)}function Qa(a){if("}"==a)return f.marked="string-2",f.state.tokenize=da,c(Y)}function xa(a){fa(f.stream,f.state);return m("{"==a?w:p)}function wa(a){fa(f.stream,f.state);return m("{"==
a?w:z)}function Oa(a){return function(b){return"."==b?c(a?Ra:Sa):"variable"==b&&q?c(Ta,a?K:D):m(a?z:p)}}function Sa(a,b){if("target"==b)return f.marked="keyword",c(D)}function Ra(a,b){if("target"==b)return f.marked="keyword",c(K)}function Ia(a){return":"==a?c(h,w):m(D,n(";"),h)}function Pa(a){if("variable"==a)return f.marked="property",c()}function X(a,b){if("async"==a)return f.marked="property",c(X);if("variable"==a||"keyword"==f.style){f.marked="objprop";if("get"==b||"set"==b)return c(Ua);var d;
q&&f.state.fatArrowAt==f.stream.start&&(d=f.stream.match(/^\s*:\s*/,!1))&&(f.state.fatArrowAt=f.stream.pos+d[0].length);return c(E)}if("number"==a||"string"==a)return f.marked=V?"property":f.style+" property",c(E);if("jsonld-keyword"==a)return c(E);if(q&&W(b))return f.marked="keyword",c(X);if("["==a)return c(p,L,n("]"),E);if("spread"==a)return c(z,E);if("*"==b)return f.marked="keyword",c(X);if(":"==a)return m(E)}function Ua(a){if("variable"!=a)return m(E);f.marked="property";return c(B)}function E(a){if(":"==
a)return c(z);if("("==a)return m(B)}function x(a,b,d){function e(g,l){return(d?-1<d.indexOf(g):","==g)?(g=f.state.lexical,"call"==g.info&&(g.pos=(g.pos||0)+1),c(function(v,ka){return v==b||ka==b?m():m(a)},e)):g==b||l==b?c():c(n(b))}return function(g,l){return g==b||l==b?c():m(a,e)}}function S(a,b,d){for(var e=3;e<arguments.length;e++)f.cc.push(arguments[e]);return c(k(b,d),x(a,b),h)}function R(a){return"}"==a?c():m(w,R)}function L(a,b){if(q){if(":"==a)return c(t);if("?"==b)return c(L)}}function Va(a){if(q&&
":"==a)return f.stream.match(/^\s*\w+\s+is\b/,!1)?c(p,Wa,t):c(t)}function Wa(a,b){if("is"==b)return f.marked="keyword",c()}function t(a,b){if("variable"==a||"void"==b){if("keyof"==b)return f.marked="keyword",c(t);f.marked="type";return c(F)}if("string"==a||"number"==a||"atom"==a)return c(F);if("["==a)return c(k("]"),x(t,"]",","),h,F);if("{"==a)return c(k("}"),x(Z,"}",",;"),h,F);if("("==a)return c(x(ya,")"),Xa)}function Xa(a){if("=>"==a)return c(t)}function Z(a,b){if("variable"==a||"keyword"==f.style)return f.marked=
"property",c(Z);if("?"==b)return c(Z);if(":"==a)return c(t);if("["==a)return c(p,L,n("]"),Z)}function ya(a){if("variable"==a)return c(ya);if(":"==a)return c(t)}function F(a,b){if("<"==b)return c(k(">"),x(t,">"),h,F);if("|"==b||"."==a||"&"==b)return c(t);if("["==a)return c(n("]"),F);if("extends"==b||"implements"==b)return f.marked="keyword",c(t)}function Ta(a,b){if("<"==b)return c(k(">"),x(t,">"),h,F)}function za(){return m(t,Ya)}function Ya(a,b){if("="==b)return c(t)}function ha(a,b){return"enum"==
b?(f.marked="keyword",c(ua)):m(A,L,M,Za)}function A(a,b){if(q&&W(b))return f.marked="keyword",c(A);if("function"==a)return I(b),c();if("variable"==a)return I(b,")"!=f.state.lexical.type||f.state.lexical.prev&&"form"==f.state.lexical.prev.type?null:"argument"),c();if("spread"==a)return c(A);if("["==a)return S(A,"]");if("{"==a)return S($a,"}")}function $a(a,b){if("variable"==a&&!f.stream.match(/^\s*:/,!1))return I(b),c(M);"variable"==a&&(f.marked="property");return"spread"==a?c(A):"}"==a?m():c(n(":"),
A,M)}function M(a,b){if("="==b)return c(z)}function Za(a){if(","==a)return c(ha)}function ra(a,b){if("keyword b"==a&&"else"==b)return c(k("form","else"),w,h)}function sa(a,b){if("await"==b)return c(sa);if("("==a)return c(k(")"),ab,n(")"),h)}function ab(a){return"var"==a?c(ha,n(";"),aa):";"==a?c(aa):"variable"==a?c(bb):m(p,n(";"),aa)}function bb(a,b){return"in"==b||"of"==b?(f.marked="keyword",c(p)):c(D,aa)}function aa(a,b){return";"==a?c(Aa):"in"==b||"of"==b?(f.marked="keyword",c(p)):m(p,n(";"),Aa)}
function Aa(a){")"!=a&&c(p)}function B(a,b){if("*"==b)return f.marked="keyword",c(B);if("variable"==a)return I(b,"function"),c(B);if("("==a)return c(P,k(")"),x(J,")"),h,Va,w,Q);if(q&&"<"==b)return c(k(">"),x(za,">"),h,B)}function J(a,b){"@"==b&&c(p,J);return"spread"==a?c(J):q&&W(b)?(f.marked="keyword",c(J)):m(A,L,M)}function Ma(a,b){return"variable"==a?ta(a,b):ba(a,b)}function ta(a,b){if("variable"==a)return I(b),c(ba)}function ba(a,b){if("<"==b)return c(k(">"),x(za,">"),h,ba);if("extends"==b||"implements"==
b||q&&","==a)return"implements"==b&&(f.marked="keyword"),c(q?t:p,ba);if("{"==a)return c(k("}"),G,h)}function G(a,b){if("async"==a||"variable"==a&&("static"==b||"get"==b||"set"==b||q&&W(b))&&f.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return f.marked="keyword",c(G);if("variable"==a||"keyword"==f.style)return f.marked="property",c(q?la:B,G);if("["==a)return c(p,L,n("]"),q?la:B,G);if("*"==b)return f.marked="keyword",c(G);if(";"==a)return c(G);if("}"==a)return c();if("@"==b)return c(p,G)}function la(a,
b){return"?"==b?c(la):":"==a?c(t,M):"="==b?c(z):m(B)}function Ja(a,b){return"*"==b?(f.marked="keyword",c(ma,n(";"))):"default"==b?(f.marked="keyword",c(p,n(";"))):"{"==a?c(x(Ba,"}"),ma,n(";")):m(w)}function Ba(a,b){if("as"==b)return f.marked="keyword",c(n("variable"));if("variable"==a)return m(z,Ba)}function Ka(a){return"string"==a?c():"("==a?m(p):m(ca,Ca,ma)}function ca(a,b){if("{"==a)return S(ca,"}");"variable"==a&&I(b);"*"==b&&(f.marked="keyword");return c(cb)}function Ca(a){if(","==a)return c(ca,
Ca)}function cb(a,b){if("as"==b)return f.marked="keyword",c(ca)}function ma(a,b){if("from"==b)return f.marked="keyword",c(p)}function Na(a){return"]"==a?c():m(x(z,"]"))}function ua(){return m(k("form"),A,n("{"),k("}"),x(db,"}"),h,h)}function db(){return m(A,M)}function na(a,b,d){return b.tokenize==C&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(b.lastType)||"quasi"==b.lastType&&/\{\s*$/.test(a.string.slice(0,a.pos-(d||0)))}var N=Ea.indentUnit,Da=y.statementIndent,
V=y.jsonld,H=y.json||V,q=y.typescript,ea=y.wordCharacters||/[\w$\xa1-\uffff]/,pa=function(){function a(ka){return{type:ka,style:"keyword"}}var b=a("keyword a"),d=a("keyword b"),e=a("keyword c"),g=a("keyword d"),l=a("operator"),v={type:"atom",style:"atom"};return{"if":a("if"),"while":b,"with":b,"else":d,"do":d,"try":d,"finally":d,"return":g,"break":g,"continue":g,"new":a("new"),"delete":e,"void":e,"throw":e,"debugger":a("debugger"),"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),
"catch":a("catch"),"for":a("for"),"switch":a("switch"),"case":a("case"),"default":a("default"),"in":l,"typeof":l,"instanceof":l,"true":v,"false":v,"null":v,undefined:v,NaN:v,Infinity:v,"this":a("this"),"class":a("class"),"super":a("atom"),yield:e,"export":a("export"),"import":a("import"),"extends":e,await:e}}(),oa=/[+\-*&%=<>!?|~^@]/,Ga=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,O,T,La={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},
f={state:null,column:null,marked:null,cc:null},Ha={name:"this",next:{name:"arguments"}};h.lex=!0;return{startState:function(a){a={tokenize:C,lastType:"sof",cc:[],lexical:new qa((a||0)-N,0,"block",!1),localVars:y.localVars,context:y.localVars&&{vars:y.localVars},indented:a||0};y.globalVars&&"object"==typeof y.globalVars&&(a.globalVars=y.globalVars);return a},token:function(a,b){a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation(),fa(a,b));if(b.tokenize!=U&&a.eatSpace())return null;
var d=b.tokenize(a,b);if("comment"==O)return d;b.lastType="operator"!=O||"++"!=T&&"--"!=T?O:"incdec";a:{var e=O,g=T,l=b.cc;f.state=b;f.stream=a;f.marked=null;f.cc=l;f.style=d;b.lexical.hasOwnProperty("align")||(b.lexical.align=!0);for(;;)if((l.length?l.pop():H?p:w)(e,g)){for(;l.length&&l[l.length-1].lex;)l.pop()();if(f.marked){d=f.marked;break a}if(a="variable"==e)b:{for(a=b.localVars;a;a=a.next)if(a.name==g){a=!0;break b}for(b=b.context;b;b=b.prev)for(a=b.vars;a;a=a.next)if(a.name==g){a=!0;break b}a=
void 0}if(a){d="variable-2";break a}break a}}return d},indent:function(a,b){if(a.tokenize==U)return u.Pass;if(a.tokenize!=C)return 0;var d=b&&b.charAt(0),e=a.lexical,g;if(!/^\s*else\b/.test(b))for(var l=a.cc.length-1;0<=l;--l){var v=a.cc[l];if(v==h)e=e.prev;else if(v!=ra)break}for(;!("stat"!=e.type&&"form"!=e.type||"}"!=d&&(!(g=a.cc[a.cc.length-1])||g!=D&&g!=K||/^[,\.=+\-*:?[\(]/.test(b)));)e=e.prev;Da&&")"==e.type&&"stat"==e.prev.type&&(e=e.prev);g=e.type;l=d==g;return"vardef"==g?e.indented+("operator"==
a.lastType||","==a.lastType?e.info+1:0):"form"==g&&"{"==d?e.indented:"form"==g?e.indented+N:"stat"==g?(d=e.indented,a="operator"==a.lastType||","==a.lastType||oa.test(b.charAt(0))||/[,.]/.test(b.charAt(0)),d+(a?Da||N:0)):"switch"!=e.info||l||0==y.doubleIndentSwitch?e.align?e.column+(l?0:1):e.indented+(l?0:N):e.indented+(/^(?:case|default)\b/.test(b)?N:2*N)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:H?null:"/*",blockCommentEnd:H?null:"*/",blockCommentContinue:H?null:" * ",
lineComment:H?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:H?"json":"javascript",jsonldMode:V,jsonMode:H,expressionAllowed:na,skipExpression:function(a){var b=a.cc[a.cc.length-1];b!=p&&b!=z||a.cc.pop()}}});u.registerHelper("wordChars","javascript",/[\w$]/);u.defineMIME("text/javascript","javascript");u.defineMIME("text/ecmascript","javascript");u.defineMIME("application/javascript","javascript");u.defineMIME("application/x-javascript","javascript");u.defineMIME("application/ecmascript",
"javascript");u.defineMIME("application/json",{name:"javascript",json:!0});u.defineMIME("application/x-json",{name:"javascript",json:!0});u.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});u.defineMIME("text/typescript",{name:"javascript",typescript:!0});u.defineMIME("application/typescript",{name:"javascript",typescript:!0})});
