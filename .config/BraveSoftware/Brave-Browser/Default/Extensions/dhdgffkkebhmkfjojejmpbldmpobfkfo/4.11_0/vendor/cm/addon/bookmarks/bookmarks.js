'use strict';(function(f){f(CodeMirror)})(function(f){var w=[void 0,"CodeMirror-bookmarks","CodeMirror-linenumbers"],n=f.Pos,x=f.Range,y=function(){var b=document.createElement("div");b.setAttribute("class","CodeMirror-bookmarks-marked");b.innerHTML="&nbsp;";return b},t=function(b,a,d){if(-1!=w.indexOf(d)){var c;(c=b.listSelections().filter(function(e){return!e.empty()}))&&0===c.length&&(c=[new x(new n(a,0),new n(a,b.getLine(a).length))]);z(b,c)}},u=function(b,a,d){for(var c,e,l,h=0;h<a.length;h++){c=
a[h].from();for(var m=a[h].to(),g=c.line;g<=m.line;++g)g<=m.line&&(c=n(g,0),l=(l=b.lineInfo(c))&&(e=l.gutterMarkers)&&e["CodeMirror-bookmarks"],d!==l&&b.setGutterMarker(c.line,"CodeMirror-bookmarks",d?y():null))}},v=function(b,a){b=b.clipPos(a);return b.line==a.line&&b.ch==a.ch?a:null};f.defineOption("bookmarkGutter",!1,function(b,a){if(a)b.on("gutterClick",t);else b.off("gutterClick",t)});var A=function(b,a,d){u(b,[a],!0);return{clear:function(){u(b,[a],!1);d&&d.clear&&d.clear()},find:function(){var c=
a.from(),e=a.to();return v(b,c)&&v(b,e)?{from:c,to:e}:null},extra:d}};f.commands.nextBookmark=function(b){var a=b.state.bookmarks;if(a)for(;a.length;){var d=a.shift(),c=d.find();if(c)return a.push(d),b.setSelection(c.from,c.to)}};f.commands.prevBookmark=function(b){var a=b.state.bookmarks;if(a)for(;a.length;){a.unshift(a.pop());var d=a[a.length-1].find();if(d)return b.setSelection(d.from,d.to);a.pop()}};var z=f.commands.toggleBookmark=function(b,a,d){var c=b.state.bookmarks||(b.state.bookmarks=[]);
a=a||b.listSelections();void 0===d&&a.every(function(k){a:{var p=k.from();k=k.to();for(p=p.line;p<=k.line;++p)if(p<=k.line){var r=new n(p,0);if((r=b.lineInfo(r))&&r.gutterMarkers){k=!0;break a}}k=void 0}return d=!k});for(var e=0;e<a.length;e++){for(var l=a[e].from(),h=a[e].to(),m=b.findMarks(n(l.line,0),n(h.line,b.getLine(h.line).length+1)),g=0;g<m.length;g++)if(m[g].bookmark){for(var q=0;q<c.length;q++)c[q].extra==m[g]&&(c[q].clear(),c.splice(q--,1));break}d&&g==m.length&&c.push(A(b,a[e],b.markText(l,
h,{bookmark:!0,clearWhenEmpty:!1})))}};f.commands.clearBookmarks=function(b){if(b=b.state.bookmarks)for(var a=0;a<b.length;a++)b[a].clear();b.length=0};f.commands.selectBookmarks=function(b){var a=b.state.bookmarks,d=[];if(a)for(var c=0;c<a.length;c++){var e=a[c].find();e?d.push({anchor:e.from,head:e.to}):a.splice(c--,0)}d.length&&b.setSelections(d,0)}});
(function(f){f(CodeMirror)})(function(f){var w=[void 0,"CodeMirror-bookmarks","CodeMirror-linenumbers"],n=f.Pos,x=f.Range,y=function(){var b=document.createElement("div");b.setAttribute("class","CodeMirror-bookmarks-marked");b.innerHTML="&nbsp;";return b},t=function(b,a,d){if(-1!=w.indexOf(d)){var c;(c=b.listSelections().filter(function(e){return!e.empty()}))&&0===c.length&&(c=[new x(new n(a,0),new n(a,b.getLine(a).length))]);z(b,c)}},u=function(b,a,d){for(var c,e,l,h=0;h<a.length;h++){c=a[h].from();
for(var m=a[h].to(),g=c.line;g<=m.line;++g)g<=m.line&&(c=n(g,0),l=(l=b.lineInfo(c))&&(e=l.gutterMarkers)&&e["CodeMirror-bookmarks"],d!==l&&b.setGutterMarker(c.line,"CodeMirror-bookmarks",d?y():null))}},v=function(b,a){b=b.clipPos(a);return b.line==a.line&&b.ch==a.ch?a:null};f.defineOption("bookmarkGutter",!1,function(b,a){if(a)b.on("gutterClick",t);else b.off("gutterClick",t)});var A=function(b,a,d){u(b,[a],!0);return{clear:function(){u(b,[a],!1);d&&d.clear&&d.clear()},find:function(){var c=a.from(),
e=a.to();return v(b,c)&&v(b,e)?{from:c,to:e}:null},extra:d}};f.commands.nextBookmark=function(b){var a=b.state.bookmarks;if(a)for(;a.length;){var d=a.shift(),c=d.find();if(c)return a.push(d),b.setSelection(c.from,c.to)}};f.commands.prevBookmark=function(b){var a=b.state.bookmarks;if(a)for(;a.length;){a.unshift(a.pop());var d=a[a.length-1].find();if(d)return b.setSelection(d.from,d.to);a.pop()}};var z=f.commands.toggleBookmark=function(b,a,d){var c=b.state.bookmarks||(b.state.bookmarks=[]);a=a||b.listSelections();
void 0===d&&a.every(function(k){a:{var p=k.from();k=k.to();for(p=p.line;p<=k.line;++p)if(p<=k.line){var r=new n(p,0);if((r=b.lineInfo(r))&&r.gutterMarkers){k=!0;break a}}k=void 0}return d=!k});for(var e=0;e<a.length;e++){for(var l=a[e].from(),h=a[e].to(),m=b.findMarks(n(l.line,0),n(h.line,b.getLine(h.line).length+1)),g=0;g<m.length;g++)if(m[g].bookmark){for(var q=0;q<c.length;q++)c[q].extra==m[g]&&(c[q].clear(),c.splice(q--,1));break}d&&g==m.length&&c.push(A(b,a[e],b.markText(l,h,{bookmark:!0,clearWhenEmpty:!1})))}};
f.commands.clearBookmarks=function(b){if(b=b.state.bookmarks)for(var a=0;a<b.length;a++)b[a].clear();b.length=0};f.commands.selectBookmarks=function(b){var a=b.state.bookmarks,d=[];if(a)for(var c=0;c<a.length;c++){var e=a[c].find();e?d.push({anchor:e.from,head:e.to}):a.splice(c--,0)}d.length&&b.setSelections(d,0)}});
