(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],c):c(CodeMirror)})(function(c){function n(b,g,a){b=b.getWrapperElement().appendChild(document.createElement("div"));b.className=a?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top";"string"==typeof g?b.innerHTML=g:b.appendChild(g);return b}function p(b,g){b.state.currentNotificationClose&&b.state.currentNotificationClose();
b.state.currentNotificationClose=g}c.defineExtension("openDialog",function(b,g,a){function f(d){if("string"==typeof d)e.value=d;else if(!k&&(k=!0,h.parentNode.removeChild(h),l.focus(),a.onClose))a.onClose(h)}a||(a={});p(this,null);var h=n(this,b,a.bottom),k=!1,l=this,e=h.getElementsByTagName("input")[0];if(e){e.focus();a.value&&(e.value=a.value,!1!==a.selectValueOnOpen&&e.select());if(a.onInput)c.on(e,"input",function(d){a.onInput(d,e.value,f)});if(a.onKeyUp)c.on(e,"keyup",function(d){a.onKeyUp(d,
e.value,f)});c.on(e,"keydown",function(d){if(!(a&&a.onKeyDown&&a.onKeyDown(d,e.value,f))){if(27==d.keyCode||!1!==a.closeOnEnter&&13==d.keyCode)e.blur(),c.e_stop(d),f();13==d.keyCode&&g(e.value,d)}});if(!1!==a.closeOnBlur)c.on(e,"blur",f)}else if(b=h.getElementsByTagName("button")[0]){c.on(b,"click",function(){f();l.focus()});if(!1!==a.closeOnBlur)c.on(b,"blur",f);b.focus()}return f});c.defineExtension("openConfirm",function(b,g,a){function f(){if(!k&&(k=!0,h.parentNode.removeChild(h),l.focus(),a.onClose))a.onClose(h)}
a||(a={});p(this,null);var h=n(this,b,a.bottom);b=h.getElementsByTagName("button");var k=!1,l=this,e=1;b[0].focus();for(var d=0;d<b.length;++d){var q=b[d];(function(m){c.on(q,"click",function(r){c.e_preventDefault(r);f();m&&m(l)})})(g[d]);!1!==a.closeOnBlur&&(c.on(q,"blur",function(){--e;setTimeout(function(){0>=e&&f()},200)}),c.on(q,"focus",function(){++e}))}c.on(h,"keydown",function(m){a.onKeyDown&&a.onKeyDown(m,f)});return f});c.defineExtension("openNotification",function(b,g){function a(){h||
(h=!0,clearTimeout(k),f.parentNode.removeChild(f))}p(this,a);var f=n(this,b,g&&g.bottom),h=!1,k;b=g&&"undefined"!==typeof g.duration?g.duration:5E3;c.on(f,"click",function(l){c.e_preventDefault(l);a()});b&&(k=setTimeout(a,b));return a})});
