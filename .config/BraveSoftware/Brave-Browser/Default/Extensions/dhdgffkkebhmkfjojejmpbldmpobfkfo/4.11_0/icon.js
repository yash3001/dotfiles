'use strict';Registry.require("promise",()=>{const p=Registry.get("promise");let e,l;const t=(c,d,b,f,a,g,m)=>{let h=document.createElement("img");h.onload=()=>{{let k;k=l?l:document.createElement("canvas");k.height=b;k.width=d;l=k;e=l.getContext("2d")}g&&e.scale(g,g);e.drawImage(h,f,a);h.parentNode&&h.parentNode.removeChild(h);h=null;m&&m()};h.src=c},n=(c,d,b,f)=>{f="rgba("+f.join(",")+", 1)";e.fillStyle=f;e.beginPath();e.arc(c,d,b,0,2*Math.PI,!0);e.fill()},q=(c,d,b,f,a,g)=>{null==a&&(a=!0);a?(e.fillStyle=
"rgba("+g.join(",")+", 0.99)",e.fillRect(c,d,b,f)):(e.fillStyle="rgb("+g.join(",")+", 1)",e.beginPath(),e.moveTo(c,d),e.lineTo(c+b,d),e.lineTo(c+b,d+f),e.lineTo(c,d+f),e.lineTo(c,d),e.stroke())},r=(c,d,b,f,a,g)=>{n(c+a,d+a,a,g);n(b-a,d+a,a,g);n(c+a,f-a,a,g);n(b-a,f-a,a,g);q(c+a,d,b-c-2*a,f-d,!0,g);q(c,d+a,b-c,f-d-2*a,!0,g)};Registry.register("icon","e1582c36",{toPNG:function(){return l.toDataURL()},getDataUriFromUrl:function(c){const d=p();let b=document.createElement("img"),f=!1,a=null;
const g=document.body||document.documentElement||document;g.appendChild(b);const m=()=>{a&&window.clearTimeout(a);f||d.reject()};a=window.setTimeout(()=>{a=null;m();f=!0},5E3);b.onload=()=>{a&&window.clearTimeout(a);let h,k;try{k=document.createElement("canvas"),k.width=b.width,k.height=b.height,k.getContext("2d").drawImage(b,0,0),h=k.toDataURL(),g.removeChild(b),b=null}catch(u){}f||d.resolve(h)};b.onerror=m;b.src=c;return d.promise()},createIconEx:function(c){const d=p();t(rea.extension.getURL("images/icon128.png"),
140,140,6,6,1,()=>{var b=116-(10<c?14:0)-(100<c?14:0)-(1E3<c?14:0)-(1E4<c?14:0);r(b,0,140,25,4,[200,0,0]);r(b+3,3,137,22,4,[190,0,0]);b+=4;e.font="22pt Arial bold";e.fillStyle="rgba("+[240,250,240].join()+", 1)";e.fillText(c,b,22);d.resolve(l.toDataURL())});return d.promise()}})});
