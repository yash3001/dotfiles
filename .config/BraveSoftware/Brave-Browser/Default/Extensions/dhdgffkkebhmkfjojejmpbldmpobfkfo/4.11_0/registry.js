'use strict';(w=>{const v=(()=>{let p=[];const k={},q={},u=(a,c,b)=>{a="string"===typeof a?[a]:a;const f=()=>a.every(e=>!!l[e]);var d=()=>{f()?b():p.push(d)};a.forEach(e=>{if(void 0===l[e]&&void 0===k[e]){const n=window.setTimeout(()=>{q[e]||(delete k[e],m.announce(e),m.loadFile(rea.extension.getURL(e+".js"),()=>{c?m.register(e,null,{}):console.log("registry: finished loading "+e+".js ")}))},0);k[e]=()=>{window.clearTimeout(n);delete k[e]}}});d()};var l={};const g={},r={};var m={log:(()=>{let a=0;
const c=[],b=()=>{const d=["debug"],e=["log"],n=["warn","info"],h=["error"],x=[...d,...e,...n,...h];80<=a&&h.push(...d);60<=a&&h.push(...e);60<=a&&h.push(...e);30<=a&&h.push(...n);x.forEach(t=>f[t]=h.includes(t)?console[t].bind(console):()=>{})},f={set:d=>{a=d;c.forEach(e=>{e(f,a)});b()},get:()=>a,verbose:(console.debug||(()=>{})).bind(console),addChangeListener:d=>{c.push(d)}};b();return f})(),init:()=>{},verify:a=>{const c=[];for(const b in g)g.hasOwnProperty(b)&&(3<g[b].length&&"###"===g[b].substr(0,
3)?console.log("registry.verify: development version detected @ "+b):g[b]!==a&&(console.warn("registry.verify: expected version "+a+" and detected "+g[b]+" @ "+b),c.push({name:b,version:g[b],expected:a})));return c},announce:a=>{q[a]=!0},register:(a,c,b,f)=>{if(!l[a]||f){g[a]=c;l[a]=b;delete q[a];let d;(d=k[a])&&d();a=p;for(p=[];a.length;)a.pop()()}},registerRaw:(a,c,b,f)=>{if(!r[a]||f)g[a]=c,r[a]=b},vendor:(a,c)=>u(a,!0,c),require:(a,c)=>u(a,!1,c),getRaw:(a,c)=>{let b;if(void 0!==(b=r[a]))c&&c(b);
else{const f=rea.extension.getURL(a);try{const d=new XMLHttpRequest;if(XMLHttpRequest.onlyasync){if(!c){console.warn("registry: async xhr without a callback!");return}d.open("GET",f);d.onload=()=>{c(d.responseText)};d.onerror=()=>{c()};d.send(null)}else d.open("GET",f,!1),d.send(null),(b=d.responseText)||console.warn("registry: content of "+a+" is null!"),c&&c(b)}catch(d){console.log("getRawContent "+d)}}return b},loadFile:(a,c)=>{a="string"===typeof a?[a]:a;let b=1;a.forEach(f=>{b++;try{rea.page.addScript(f,
d=>{d||console.warn("registry: self.load "+f+" failed! ");0==--b&&c&&c()})}catch(d){console.warn("registry: self.load "+f+" failed! ",d),0==--b&&c&&c()}});0==--b&&c&&c()},isDevVersion:a=>g[a]&&"###"===g[a].substr(0,3),get:(a,...c)=>{let b;a=l[a];"function"===typeof a?b=a.apply(this,c):a&&(b=a);return b}};return m})();window.setTimeout(v.init,1);w.Registry=v})("undefined"!==typeof rea?rea.globals:window);
